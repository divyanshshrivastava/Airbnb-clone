<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AirBnB</title>
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <!-- NAVBAR -->
    <nav class="navbar">
      <div class="nav-inner">
        <a class="brand" href="/">AirBnB</a>
        <div class="nav-links">
          <a class="nav-link" href="/">Home</a>
          <a class="btn btn-primary" href="/listings/add">Create New Listing</a>
        </div>
      </div>
    </nav>

    <main class="main-wrap">
      <header class="page-header">
        <!-- <h3>Here lies all the listings</h3> -->
      </header>

      <% const defaultImg = "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?q=80&w=1920&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"; %>

      <div class="cards-container">
        <% for(let listing of allListing){ %>
          <a class="card-link" href="/listings/<%= listing._id %>">
            <article class="data-cards">
              <div class="img-wrap">
                <img
                  class="card-img"
                  src="<%= (listing.image && listing.image.url) ? listing.image.url : defaultImg %>"
                  alt="<%= listing.title %>"
                />
              </div>

              <div class="card-body">
                <h4 class="card-title">Title: <%= listing.title %></h4>
                <p class="card-desc"><%= listing.description %></p>

                <div class="card-meta">
                  <span class="card-price">â‚¹<%= listing.price.toLocaleString("en-IN") %></span>
                  <span class="card-location"><%= listing.location %>, <%= listing.country %></span>
                </div>
              </div>
            </article>
          </a>
        <% } %>
      </div>
    </main>
  </body>
</html>
